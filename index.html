<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bookids - Create Stories for Cognitive Development</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">Bookids.</div>
            <div class="sidebar-section">Discover</div>
            <div class="sidebar-menu">
                <div class="menu-item active" onclick="showMainPage()">
                    <img src="icons/home.svg" alt="Home" class="menu-icon">
                    <span>Home</span>
                </div>
                <div class="menu-item" onclick="showLibrary()">
                    <img src="icons/search.svg" alt="Library" class="menu-icon">
                    <span>Library</span>
                </div>
                <div class="menu-item" onclick="showDashboard()">
                    <img src="icons/dashboard.svg" alt="Dashboard" class="menu-icon">
                    <span>Dashboard</span>
                </div>
            </div>
            <div class="profile-area">
                <div class="menu-item">
                    <img src="icons/profile.svg" alt="Profile" class="menu-icon">
                    <span>Profile</span>
                </div>
            </div>
        </div>
        <div class="main-content">
            <!-- Basic Info Form (Page 1) -->
            <div id="basic-info-form" class="content-panel">
                <div class="back-button" style="visibility: hidden;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M19 12H5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 19L5 12L12 5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h1>Create a unique story for your kid!</h1>
                <p class="subtitle">Let's start with some basic information</p>
                
                <div class="progress-bar">
                    <div class="progress-indicator" style="width: 25%;"></div>
                </div>
                
                <div class="form-section">
                    <div class="form-group">
                        <label for="openai-key">OpenAI API Key</label>
                        <input type="password" id="openai-key" placeholder="sk-..." class="text-input">
                        <small>
                            Enter your OpenAI API key (starts with "sk-"). 
                            <a href="https://platform.openai.com/api-keys" target="_blank" rel="noopener noreferrer">Get your API key here</a>. 
                            Your key is never stored and only used to generate your story.
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label for="child-name">Child's Name</label>
                        <input type="text" id="child-name" placeholder="e.g., Alexander" class="text-input">
                    </div>
                    
                    <div class="form-group">
                        <label>Gender</label>
                        <div class="toggle-group">
                            <div class="toggle-option active">Boy</div>
                            <div class="toggle-option">Girl</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Age</label>
                        <div class="slider-container">
                            <input type="range" min="3" max="10" value="5" class="slider" id="age-slider">
                            <div class="slider-value">5</div>
                        </div>
                    </div>
                </div>
                
                <button class="next-button" onclick="showStoryDetailsForm()">
                    Next
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                        <path d="M5 12H19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 5L19 12L12 19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            
            <!-- Story Details Form (Page 2) -->
            <div id="story-details-form" class="content-panel" style="display: none;">
                <div class="back-button" onclick="showBasicInfoForm()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M19 12H5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 19L5 12L12 5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h1>Story details</h1>
                <p class="subtitle">Customize your story settings</p>
                
                <div class="progress-bar">
                    <div class="progress-indicator" style="width: 50%;"></div>
                </div>
                
                <div class="form-section">
                    <div class="form-group">
                        <label>Story Length</label>
                        <div class="toggle-group">
                            <div class="length-option active" data-length="short">Short</div>
                            <div class="length-option" data-length="medium">Medium</div>
                            <div class="length-option" data-length="long">Long</div>
                        </div>
                        <small>Short (~200 words), Medium (~400 words), Long (~600 words)</small>
                    </div>
                    
                    <div class="form-group">
                        <label>Interests (Choose up to 3)</label>
                        <div class="interests-grid">
                            <div class="interest-option">Animals</div>
                            <div class="interest-option">Space</div>
                            <div class="interest-option">Dinosaurs</div>
                            <div class="interest-option">Ocean</div>
                            <div class="interest-option">Sports</div>
                            <div class="interest-option">Music</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Additional Characters</label>
                        <div id="characters-container">
                            <!-- Characters will be added here dynamically -->
                        </div>
                        <button type="button" id="add-character-btn" class="add-character-btn">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                            Add a character
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label for="custom-prompt">Custom Story Elements (Optional)</label>
                        <textarea id="custom-prompt" placeholder="Add specific themes, settings, or story elements you'd like to include..." class="text-input custom-prompt" rows="3"></textarea>
                        <small>For example: "Set in a space station" or "Include a magical talking cat"</small>
                    </div>
                </div>
                
                <button class="next-button" onclick="showCognitiveAreas()">
                    Next
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                        <path d="M5 12H19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 5L19 12L12 19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            
            <div id="cognitive-areas" class="content-panel" style="display: none;">
                <div class="back-button" onclick="showStoryDetailsForm()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M19 12H5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 19L5 12L12 5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h1>Cognitive areas to develop in your story</h1>
                <p class="subtitle">We suggest you to pick up max. 2 for story</p>
                
                <div class="progress-bar">
                    <div class="progress-indicator" style="width: 66%;"></div>
                </div>
                
                <div class="cognitive-grid">
                    <div class="cognitive-card" data-area="executive-function">
                        <h3>Executive Function</h3>
                        <p>Foundational "air traffic control" skills of the brain.</p>
                        <button class="learn-more">Learn more</button>
                    </div>
                    
                    <div class="cognitive-card" data-area="attention-focus">
                        <h3>Attention and Focus</h3>
                        <p>The ability to concentrate, sustain attention, and selectively attend stimuli.</p>
                        <button class="learn-more">Learn more</button>
                    </div>
                    
                    <div class="cognitive-card" data-area="memory">
                        <h3>Memory</h3>
                        <p>Involves encoding, storing, and retrieving information.</p>
                        <button class="learn-more">Learn more</button>
                    </div>
                    
                    <div class="cognitive-card" data-area="language">
                        <h3>Language and communication</h3>
                        <p>Central to thought, learning and social development.</p>
                        <button class="learn-more">Learn more</button>
                    </div>
                    
                    <div class="cognitive-card" data-area="problem-solving">
                        <h3>Reasoning and Problem Solving</h3>
                        <p>The ability to make sense of information and apply logic.</p>
                        <button class="learn-more">Learn more</button>
                    </div>
                    
                    <div class="cognitive-card" data-area="conceptual">
                        <h3>Conceptual Understanding</h3>
                        <p>Forming mental representations and categories.</p>
                        <button class="learn-more">Learn more</button>
                    </div>
                </div>
                
                <button class="next-button" onclick="showArtStyles()">
                    Next
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                        <path d="M5 12H19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 5L19 12L12 19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            
            <div id="art-styles" class="content-panel" style="display: none;">
                <div class="back-button" onclick="showCognitiveAreas()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M19 12H5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 19L5 12L12 5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h1>Choose an art style for your story</h1>
                <p class="subtitle">We'll use this to generate the illustrations</p>
                
                <div class="progress-bar">
                    <div class="progress-indicator" style="width: 100%;"></div>
                </div>
                
                <div class="art-style-grid">
                    <div class="art-style-card" data-style="watercolor">
                        <div class="art-preview watercolor"></div>
                        <p>Watercolor Illustration</p>
                    </div>
                    
                    <div class="art-style-card" data-style="digital">
                        <div class="art-preview digital"></div>
                        <p>Digital Painting Vector Illustration</p>
                    </div>
                    
                    <div class="art-style-card" data-style="pen-ink">
                        <div class="art-preview pen-ink"></div>
                        <p>Pen and Ink with Color Washes</p>
                    </div>
                    
                    <div class="art-style-card" data-style="collage">
                        <div class="art-preview collage"></div>
                        <p>Collage Mixed Media</p>
                    </div>
                    
                    <div class="art-style-card" data-style="3d">
                        <div class="art-preview threed"></div>
                        <p>3D Rendering</p>
                    </div>
                </div>
                
                <button class="next-button" onclick="generateStory()">
                    Generate Story
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                        <path d="M5 12H19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 5L19 12L12 19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            
            <div id="story-result" class="content-panel" style="display: none;">
                <div class="book-container">
                    <div class="book-cover">
                        <h2 id="story-title">Alexander's Adventure</h2>
                    </div>
                    
                    <div class="book-pages">
                        <div class="book-page left-page">
                            <div id="page-number" class="page-number">1</div>
                            <div class="page-content" id="story-text">
                                Your story will appear here...
                            </div>
                        </div>
                        <div class="book-page right-page">
                            <div class="page-illustration">
                                <img id="story-illustration" src="" alt="Story illustration">
                            </div>
                        </div>
                    </div>
                    
                    <div class="book-details-wrapper">
                        <div class="story-details">
                            <h3>Characters</h3>
                            <div id="character-profiles" class="character-profiles">
                                <!-- Populated by JavaScript -->
                            </div>
                            
                            <h3>Cognitive Development Goals</h3>
                            <div id="cognitive-details" class="cognitive-details">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="story-controls-wrapper">
                            <div class="pagination-controls">
                                <button id="prev-page" class="page-nav-btn" disabled>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M15 18l-6-6 6-6"></path>
                                    </svg>
                                </button>
                                <button id="next-page" class="page-nav-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9 18l6-6-6-6"></path>
                                    </svg>
                                </button>
                            </div>
                            
                            <div class="story-controls">
                                <button class="read-now-button">Read Now</button>
                                <button class="save-button" onclick="saveToLibrary()">Save to Library</button>
                                <button class="create-new-button" id="create-new-story">Create New Story</button>
                            </div>
                            
                            <div class="book-action-buttons">
                                <button class="book-action-btn listen" onclick="toggleAudio(event)">
                                    <span class="btn-label">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polygon points="5 3 19 12 5 21 5 3"></polygon>
                                        </svg>
                                        Listen
                                    </span>
                                </button>
                                <button class="book-action-btn export" onclick="exportToPDF()">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M14 3v4a1 1 0 0 0 1 1h4"></path>
                                        <path d="M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v11a2 2 0 0 1-2 2z"></path>
                                        <path d="M12 17v-6"></path>
                                        <path d="M9 14l3 3 3-3"></path>
                                    </svg>
                                    Export
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="library-view" class="content-panel" style="display: none;">
                <h1>Your Library</h1>
                <p class="subtitle">All your saved stories in one place</p>
                
                <div id="library-empty" style="text-align: center; padding: 3rem 0;">
                    <h3>Your library is empty</h3>
                    <p>Create a story to get started!</p>
                    <button class="primary-button" onclick="showMainPage()">Create a Story</button>
                </div>
                
                <div id="library-grid" class="library-grid">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
            
            <!-- Dashboard View -->
            <div id="dashboard-view" class="content-panel" style="display: none;">
                <h1>Your Dashboard</h1>
                <p class="subtitle">Track your child's cognitive development progress</p>
                
                <div class="dashboard-grid">
                    <div class="dashboard-card stats-card">
                        <h3>Your Stats</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="total-books">0</div>
                                <div class="stat-label">Total Books</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="characters-created">0</div>
                                <div class="stat-label">Characters</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="favorite-style">-</div>
                                <div class="stat-label">Favorite Style</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-card cognitive-progress-card">
                        <h3>Cognitive Development Focus</h3>
                        <div id="cognitive-progress" class="cognitive-progress">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="dashboard-card recent-activity-card">
                        <h3>Recent Activity</h3>
                        <div id="recent-activity" class="recent-activity">
                            <div class="empty-state">
                                <p>No recent activity yet</p>
                                <button class="primary-button small" onclick="showMainPage()">Create a Story</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-card recommendations-card">
                        <h3>Recommendations</h3>
                        <div class="recommendations">
                            <div class="recommendation-item">
                                <div class="recommendation-icon">🧠</div>
                                <div class="recommendation-content">
                                    <h4>Problem Solving</h4>
                                    <p>Try creating a story focused on problem-solving skills next to help develop critical thinking.</p>
                                </div>
                            </div>
                            <div class="recommendation-item">
                                <div class="recommendation-icon">🔤</div>
                                <div class="recommendation-content">
                                    <h4>Language Development</h4>
                                    <p>Consider stories that introduce new vocabulary and language concepts.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="loading" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Generating your story...</p>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="error-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close-modal" onclick="document.getElementById('error-modal').style.display='none'">&times;</span>
            </div>
            <div id="error-content" class="modal-body">
                <!-- Error message will be inserted here -->
            </div>
            <div class="modal-footer">
                <button onclick="document.getElementById('error-modal').style.display='none'" class="modal-button">Close</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Initialize with user preferences when the DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Apply saved preferences
            if (typeof applyUserPreferences === 'function') {
                applyUserPreferences();
            }
        });
    </script>
</body>
</html> 